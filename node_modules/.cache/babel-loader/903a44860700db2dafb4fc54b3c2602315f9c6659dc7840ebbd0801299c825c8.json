{"ast":null,"code":"var _jsxFileName = \"/Users/biamsarmento/Documents/Tripleten/Sprint13/web_project_around_react/sprint13/src/App.js\",\n  _s = $RefreshSig$();\nimport Header from './components/Header';\nimport Main from './components/Main';\nimport Footer from './components/Footer';\nimport React from 'react';\n// import { useEffect } from 'react';\nimport './index.css';\nimport api from './utils/api';\nimport CurrentUserContext from './contexts/CurrentUserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [cards, setCards] = React.useState([]);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setDeleteCardPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState('');\n  React.useEffect(() => {\n    (async () => {\n      await api.getUserInfo().then(data => {\n        setCurrentUser(data);\n      }).catch(err => {\n        console.error(\"Erro ao obter Usrr Info:\", err);\n      });\n    })();\n    api.getInitialCards().then(result => {\n      setCards(result);\n    }).catch(err => {\n      console.error(\"Erro ao obter cartões iniciais:\", err);\n    });\n  }, []);\n\n  // CARD\n\n  async function handleCardLike(card) {\n    // Verificar mais uma vez se esse cartão já foi curtido\n    const isLiked = card.likes.some(user => user._id === currentUser._id);\n\n    // Enviar uma solicitação para a API e obter os dados do cartão atualizados\n    await api.changeLikeCardStatus(card._id, !isLiked).then(newCard => {\n      setCards(state => state.map(currentCard => currentCard._id === card._id ? newCard : currentCard));\n    }).catch(error => console.error(error));\n  }\n  async function handleCardDelete(card) {\n    await api.deleteCard(card._id).then(() => {\n      setCards(state => state.filter(currentCard => currentCard._id !== card._id));\n    }).catch(error => console.error(error));\n  }\n  const handleUpdateUser = data => {\n    (async () => {\n      await api.editProfile(data).then(newData => {\n        setCurrentUser(newData);\n      });\n    })();\n  };\n  function handleUpdateAvatar(avatar) {\n    api.editProfilePicture(avatar).then(newUserData => {\n      setCurrentUser(newUserData);\n    }).catch(err => console.error(err));\n  }\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n  function handleDeleteCardClick() {\n    setDeleteCardPopupOpen(true);\n  }\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n  function closeAllPopups() {\n    setSelectedCard(null);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setDeleteCardPopupOpen(false);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n      value: {\n        currentUser,\n        handleUpdateUser,\n        handleUpdateAvatar\n      },\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Main, {\n        onEditProfileClick: handleEditProfileClick,\n        onAddPlaceClick: handleAddPlaceClick,\n        onEditAvatarClick: handleEditAvatarClick,\n        onDeleteCardClick: handleDeleteCardClick,\n        isEditProfilePopupOpen: isEditProfilePopupOpen,\n        isAddPlacePopupOpen: isAddPlacePopupOpen,\n        isEditAvatarPopupOpen: isEditAvatarPopupOpen,\n        isDeleteCardPopupOpen: isDeleteCardPopupOpen,\n        selectedCard: selectedCard,\n        onClose: closeAllPopups,\n        onCardClick: handleCardClick,\n        card: cards,\n        onCardLike: handleCardLike,\n        onCardDelete: handleCardDelete\n\n        // onOpenPopup={handleOpenPopup}\n        // onClosePopup={handleClosePopup}\n        // popup={popup}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"V85dynHANG+MP9RFuiWr1St8uoQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Header","Main","Footer","React","api","CurrentUserContext","jsxDEV","_jsxDEV","App","_s","cards","setCards","useState","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isDeleteCardPopupOpen","setDeleteCardPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","useEffect","getUserInfo","then","data","catch","err","console","error","getInitialCards","result","handleCardLike","card","isLiked","likes","some","user","_id","changeLikeCardStatus","newCard","state","map","currentCard","handleCardDelete","deleteCard","filter","handleUpdateUser","editProfile","newData","handleUpdateAvatar","avatar","editProfilePicture","newUserData","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleDeleteCardClick","handleCardClick","closeAllPopups","className","children","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","onEditProfileClick","onAddPlaceClick","onEditAvatarClick","onDeleteCardClick","onClose","onCardClick","onCardLike","onCardDelete","_c","$RefreshReg$"],"sources":["/Users/biamsarmento/Documents/Tripleten/Sprint13/web_project_around_react/sprint13/src/App.js"],"sourcesContent":["import Header from './components/Header';\nimport Main from './components/Main';\nimport Footer from './components/Footer';\nimport React from 'react';\n// import { useEffect } from 'react';\nimport './index.css';\nimport api from './utils/api';\nimport CurrentUserContext from './contexts/CurrentUserContext';\n\nfunction App() {\n\n  const [cards, setCards] = React.useState([]);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setDeleteCardPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState('');\n\n  React.useEffect(() => {\n    (async () => {\n      await api.getUserInfo()\n        .then((data) => {\n          setCurrentUser(data);\n        })\n        .catch((err) => {\n          console.error(\"Erro ao obter Usrr Info:\", err);\n        });\n    })();\n      api.getInitialCards()\n        .then((result) => {\n          setCards(result); \n        })\n        .catch((err) => {\n          console.error(\"Erro ao obter cartões iniciais:\", err);\n        });\n  }, []);\n\n  // CARD\n\n  async function handleCardLike(card) {\n    // Verificar mais uma vez se esse cartão já foi curtido\n    const isLiked = card.likes.some(user => user._id === currentUser._id);\n    \n    // Enviar uma solicitação para a API e obter os dados do cartão atualizados\n    await api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n        setCards((state) => state.map((currentCard) => currentCard._id === card._id ? newCard : currentCard));\n    }).catch((error) => console.error(error));\n}\n\nasync function handleCardDelete(card) {\n    await api.deleteCard(card._id)\n        .then(() => {\n            setCards((state) => \n                state.filter((currentCard) => currentCard._id !== card._id)\n            );\n        })\n        .catch((error) => console.error(error));\n}\n\n  const handleUpdateUser = (data) => {\n    (async () => {\n      await api.editProfile(data).then((newData) => {\n        setCurrentUser(newData);\n      });\n    })();\n  };\n\n  function handleUpdateAvatar(avatar) {\n    api.editProfilePicture(avatar)\n      .then((newUserData) => {\n        setCurrentUser(newUserData); \n      })\n      .catch((err) => console.error(err));\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleDeleteCardClick() {\n    setDeleteCardPopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function closeAllPopups() {\n    setSelectedCard(null);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setDeleteCardPopupOpen(false);\n  }\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={{currentUser, handleUpdateUser, handleUpdateAvatar}}>\n        <Header></Header>\n        <Main \n          onEditProfileClick={handleEditProfileClick}\n          onAddPlaceClick={handleAddPlaceClick}\n          onEditAvatarClick={handleEditAvatarClick}\n          onDeleteCardClick={handleDeleteCardClick}\n          isEditProfilePopupOpen={isEditProfilePopupOpen}\n          isAddPlacePopupOpen={isAddPlacePopupOpen}\n          isEditAvatarPopupOpen={isEditAvatarPopupOpen}\n          isDeleteCardPopupOpen={isDeleteCardPopupOpen}\n          selectedCard={selectedCard}\n          onClose={closeAllPopups}\n          onCardClick={handleCardClick}\n\n          card={cards}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n\n          // onOpenPopup={handleOpenPopup}\n          // onClosePopup={handleClosePopup}\n          // popup={popup}\n        ></Main>\n        <Footer></Footer>\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}